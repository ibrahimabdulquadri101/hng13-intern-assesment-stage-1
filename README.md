# **String Analysis Service**

This document outlines the complete architecture, implementation details, and operational instructions for the **String Analysis Service**. This backend application is built using the **Express, Mongoose, and Node.js (MEN)** stack, designed to compute analytical properties for strings, store the data using a content-addressable model (SHA-256), and provide robust API endpoints.

## **1\. Project Architecture and Setup**

The application employs a modular architecture with clear separation between models, controllers, and routes. It uses **ECMAScript Modules (ESM)** for imports and exports.

### **üõ†Ô∏è Dependencies and Installation**

The service relies on standard Node.js packages. Install them from the project root:

npm install express mongoose dotenv

### **‚öôÔ∏è Environment Variables and Configuration**

Sensitive configuration data is managed via a **.env** file located in the project root. This file **must** be created and populated before running the service.

| Variable | Purpose | Example |
| :---- | :---- | :---- |
| **PORT** | The TCP port for the Express server. | 3000 |
| **DB\_URI** | The connection string for your MongoDB Atlas cluster. | mongodb+srv://user:password@cluster0... |

**Example .env Content:**

PORT \= 3000  
DB\_URI \= mongodb+srv://username:password@cluster0.c3xyjpt.mongodb.net/?retryWrites=true\&w=majority\&appName=Cluster0

### **üöÄ Running Locally**

1. Ensure your .env file is configured.  
2. Start the server using the Node runtime:  
   node app.js

3. The console will confirm the database connection and the application will be active at http://localhost:\<PORT\>.

## **2\. Core Logic and Data Model**

### **üìä Data Model (string.model.js)**

The Mongoose schema enforces a **content-addressable storage** paradigm. The id field stores the SHA-256 hash of the string content, ensuring every unique string has exactly one corresponding document.

// Key Schema Fields:  
// id: String (SHA-256 Hash \- Primary Key)  
// value: String (Original content)  
// properties: Embedded object containing analytical results (length, palindrome status, word\_count, etc.).  
// properties.character\_frequency\_map: Mongoose Map type for character counts.

### **üß† Analytical Helpers (string.controller.js)**

All analytical properties are generated by deterministic helper functions (e.g., sha256String, isPalindrome, wordCount) within the controller before database insertion.

## **3\. API Endpoints and Implementation Details**

The application implements five main controller functions, exposed via string.routes.js.

### **A. Data Analysis and Creation**

| Method | Path | Controller | Logic Details |
| :---- | :---- | :---- | :---- |
| **POST** | /string | analyzeString | Calculates the sha256\_hash. Performs a lookup, returning **409 Conflict** if the string already exists, or **201 Created** upon successful insertion. |

### **B. Retrieval and Deletion by Content**

A core feature is using the **raw string content** as the route parameter (:id) for single-resource actions.

| Method | Path | Controller | Logic Details |
| :---- | :---- | :---- | :---- |
| **GET** | /strings/:id | getSpecificStrings | Treats :id as the raw string content. Calculates the hashId internally and queries the database via StringAnalysis.findOne({ id: hashId }). Returns **404 Not Found** if no document is found. |
| **DELETE** | /strings/:id | Delete | Calculates the hashId from :id. Uses StringAnalysis.deleteOne({ id: hashId }). Returns **204 No Content** on success or **404 Not Found** if the string did not exist (result.deletedCount \=== 0). |

### **C. Advanced Filtering and Querying**

The controllers use dynamic query construction to support complex data retrieval requirements.

| Method | Path | Controller | Logic Details |
| :---- | :---- | :---- | :---- |
| **GET** | /strings | getAllStrings | Builds a Mongoose query from structured parameters (min\_length, is\_palindrome, etc.). Uses MongoDB range operators ($gte, $lte) and efficient **map key existence checks** ($exists: true) for the contains\_character filter. |
| **GET** | /strings/filter-by-natural-language | filterByNaturalLanguage | Employs a **rule-based lexical parser** to translate phrases (e.g., "single word palindromic") into structured database filters. Returns **400 Bad Request** if the query is unparsable. |

